"use strict";var modal=document.querySelector(".modal"),overlay=document.querySelector(".overlay"),body=document.querySelector("body"),commentsCtn=document.querySelector(".allCommentCtn"),userImgEl=document.querySelector("#currentUserImg"),openModal=function(){modal.classList.add("fade-in"),overlay.classList.add("fade-in"),modal.style.display="block",overlay.style.display="block",body.classList.toggle("no-scroll"),overlay.addEventListener("click",closeModal)},closeModal=function(){modal.classList.add("fade-out"),overlay.classList.add("fade-out"),body.classList.toggle("no-scroll"),setTimeout((function(){modal.style.display="none",overlay.style.display="none",modal.classList.remove("fade-out"),overlay.classList.remove("fade-out")}),300)},commentData=JSON.parse(localStorage.getItem("commentData"))||[],currenUser={},setCurrentUser=function(){currenUser=commentData.currentUser,userImgEl.src=currenUser.image.webp};0===commentData.length?fetch("./data.json").then((function(e){return e.json()})).then((function(e){commentData=e,localStorage.setItem("commentData",JSON.stringify(commentData)),setTimeout((function(){setCurrentUser(),renderComments()}))})).catch((function(e){return console.log("something went wrong",e)})):setTimeout((function(){setCurrentUser(),console.log(commentData.comments),renderComments()}));var renderComments=function(){commentsCtn.innerHTML="",console.log("working"),commentData.comments.forEach((function(e,n){var t=e.content,o=e.createdAt,c=e.replies,l=e.score,s=e.user;commentsCtn.innerHTML+='\n\n     <section class="commentSection">\n        <div id="'.concat(n,'" class="commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4">\n            <div class="commentCard__header flex items-center gap-x-4 pb-4">\n                <img class="w-10" src="').concat(s.image.webp,'" alt="profile img avatar">\n                <p class="username font-semibold">').concat(s.username,'</p>\n                <p class="postedAt font-medium">').concat(o,'</p>\n            </div>\n            <p class="commentCard__comment">\n                ').concat(t,'\n            </p>\n            <div class="commentCard__footer flex items-center justify-between mt-5 lg:block">\n                <div class="score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3">\n                <i onclick="increaseScore(').concat(n,')" class="bi bi-plus"></i>\n                <span class="count">').concat(l,'</span>\n                <i onclick="decreaseScore(').concat(n,')" class="bi bi-dash"></i>\n                </div>\n                <div  onclick="reply(this)" class="replyBtn flex items-center gap-x-1 font-medium lg:absolute top-7 right-10 cursor-pointer">\n                <i class="bi bi-reply-fill"></i>\n                <p>Reply</p>\n                </div>\n            </div>\n        </div>\n\n        ').concat(renderReplies(c,n),"\n\n   </section>\n\n     ")}))},renderReplies=function(e,n){var t="";return getSpaceBetweenElements(n),e.length>0&&e.forEach((function(e,o){var c=e.content,l=e.createdAt,s=e.replyingTo,a=e.score,r=e.user;t+='\n            <div class="replyCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 w-[95%] lg:w-[88%]">\n                    '.concat(0===o?'\n                    <span id="line" class="block absolute h-[26rem] top-0 w-[1.3px] left-[-.95rem] lg:left-[-3rem] bg-slate-300"></span>\n                    ':"",'\n                    <div class="replyCard__header flex items-center gap-x-4 pb-4">\n                        <img class="w-10" src="').concat(r.image.webp,'" alt="">\n                        <p class="username font-semibold">').concat(r.username,'</p>\n                        <p class="postedAt font-medium">').concat(l,'</p>\n                    </div>\n                    <p class="replyCard__comment">\n                     <span class="replyTo font-bold pr-1">@').concat(s,"</span>").concat(c,'\n                    </p>\n                    <div class="replyCard__footer flex items-center justify-between mt-5 lg:block">\n                        <div class="score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3">\n                            <i onclick="increaseReplyScore(').concat(o,", '").concat(n,'\')" class="bi bi-plus"></i>\n                            <span class="count">').concat(a,'</span>\n                            <i onclick="decreaseReplyScore(').concat(o,", '").concat(n,'\')" class="bi bi-dash"></i>\n                        </div>\n                    <div onclick="reply(this)" class="replyBtn flex items-center gap-x-1 font-medium lg:absolute top-7 right-10 cursor-pointer">\n                        <i class="bi bi-reply-fill"></i>\n                        <p>Reply</p>\n                    </div>\n                  </div>\n          </div>\n            ')})),t},getSpaceBetweenElements=function(e){element1=document.getElementById("".concat(e)),console.log(element1),e!==commentData.comments.length-1?element2=element1.nextElementSibling:element2=document.querySelector(".addComment");var n=element2.offsetTop-(element1.offsetTop+element1.offsetHeight);console.log(element1,element2,n)};