{"version":3,"sources":["script.js"],"names":["modal","document","querySelector","overlay","body","commentsCtn","userImgEl","openModal","element","classList","add","style","display","toggle","addEventListener","closeModal","setTimeout","remove","commentData","JSON","parse","localStorage","getItem","currentUser","updatelocalstorage","setItem","stringify","setCurrentUser","src","image","webp","length","fetch","then","res","json","data","renderComments","err","console","log","comments","innerHTML","forEach","comment","i","content","createdAt","replies","score","user","username","concat","renderReplies","commentIndex","html","getSpaceBetweenElements","reply","value","date","replyingTo","Date","getTime","formatDate","heights","element1","element2","spaceBetweenElements","minusValue","arguments","undefined","lines","Array","from","querySelectorAll","getElementById","parentElement","nextElementSibling","offsetTop","offsetHeight","push","height","increaseScore","find","id","textContent","decreaseScore","previousElementSibling","increaseReplyScore","replyIndex","thisReplies","indexOf","decreaseReplyScore","window","isOnReply","lastChild","closest","lastElementChild","getAttribute","insertAdjacentHTML","textArea","focus","selectionStart","selectionEnd","setAttribute","locale","navigator","language","calcDaysPassed","date1","date2","Math","round","abs","daysPassed","Intl","DateTimeFormat","format","preRenderReply","commentToInsertIn","inputValue","trim","replace","png"],"mappings":"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","file":"script.js","sourcesContent":["const modal = document.querySelector(\".modal\");\r\nconst overlay = document.querySelector(\".overlay\");\r\nconst body = document.querySelector(\"body\");\r\nconst commentsCtn = document.querySelector(\".allCommentCtn\");\r\nconst userImgEl = document.querySelector(\"#currentUserImg\");\r\n\r\n\r\nconst openModal = (element) => {\r\n  modal.classList.add(\"fade-in\");\r\n  overlay.classList.add(\"fade-in\");\r\n  modal.style.display = \"block\"; // make the modal visible\r\n  overlay.style.display = \"block\"; // make the overlay visible\r\n  body.classList.toggle(\"no-scroll\");\r\n\r\n  overlay.addEventListener(\"click\", closeModal);\r\n};\r\n\r\nconst closeModal = () => {\r\n  modal.classList.add(\"fade-out\");\r\n  overlay.classList.add(\"fade-out\");\r\n  body.classList.toggle(\"no-scroll\");\r\n\r\n  setTimeout(() => {\r\n    modal.style.display = \"none\"; // hide the modal after the animation completes\r\n    overlay.style.display = \"none\"; // hide the overlay after the animation completes\r\n    modal.classList.remove(\"fade-out\");\r\n    overlay.classList.remove(\"fade-out\");\r\n  }, 300); // set the timeout to match the animation duration\r\n};\r\n\r\nlet commentData = JSON.parse(localStorage.getItem(\"commentData\")) || [];\r\nlet currentUser = {};\r\n\r\nconst updatelocalstorage = () => {\r\n  localStorage.setItem(\"commentData\", JSON.stringify(commentData));\r\n  commentData = JSON.parse(localStorage.getItem(\"commentData\"))\r\n}\r\n\r\nconst setCurrentUser = () => {\r\n  currentUser = commentData.currentUser;\r\n  userImgEl.src = currentUser.image.webp;\r\n};\r\n\r\nif (commentData.length === 0) {\r\n  fetch(\"./data.json\")\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      commentData = data;\r\n      localStorage.setItem(\"commentData\", JSON.stringify(commentData));\r\n      setTimeout(() => {\r\n        setCurrentUser();\r\n        renderComments();\r\n      });\r\n    })\r\n    .catch((err) => console.log(\"something went wrong\", err));\r\n} else {\r\n  setTimeout(() => {\r\n    setCurrentUser();\r\n    console.log(commentData.comments);\r\n    renderComments();\r\n  });\r\n}\r\n\r\nconst renderComments = () => {\r\n  commentsCtn.innerHTML = \"\";\r\n  console.log(\"working\");\r\n\r\n  commentData.comments.forEach((comment, i) => {\r\n    const { content, createdAt, replies, score, user } = comment;\r\n\r\n      if (user.username !== currentUser.username) {\r\n        commentsCtn.innerHTML += /*html*/ `\r\n        \r\n        <section class=\"commentSection\">\r\n           <div id=\"${i}\" class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4\">\r\n               <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n                   <img class=\"w-10\" src=\"${\r\n                     user.image.webp\r\n                   }\" alt=\"profile img avatar\">\r\n                   <p class=\"username font-semibold\">${user.username}</p>\r\n                   <p class=\"postedAt font-medium\">${createdAt}</p>\r\n               </div>\r\n               <p class=\"commentCard__comment\">\r\n                   ${content}\r\n               </p>\r\n               <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n                   <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n                   <i onclick=\"increaseScore(${i}, this)\" class=\"bi bi-plus\"></i>\r\n                   <span class=\"count\">${score}</span>\r\n                   <i onclick=\"decreaseScore(${i}, this)\" class=\"bi bi-dash\"></i>\r\n                   </div>\r\n                   <div data-clicked=\"false\" onclick=\"reply(this, ${i}, false, '${user.username}')\" class=\"replyBtn flex items-center gap-x-1 font-medium lg:absolute top-7 right-10 cursor-pointer\">\r\n                   <i class=\"bi bi-reply-fill\"></i>\r\n                   <p>Reply</p>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n   \r\n           ${renderReplies(replies, i)}\r\n   \r\n      </section>\r\n   \r\n        `;\r\n      } else {\r\n          commentsCtn.innerHTML += /*html*/ `\r\n          <section class=\"commentSection\">\r\n          \r\n          <div id=\"${i}\" class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 mt-5 ml-auto w-[95%] lg:w-[88%]\">\r\n              <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n                  <img class=\"w-10\" src=\"${user.image.webp}\" alt=\"user profile avatar\">\r\n                  <p class=\"username font-semibold\">${user.username}</p>\r\n                  <p class=\"you text-white px-2 ml-[-10px] text-sm\">you</p>\r\n                  <p class=\"postedAt font-medium\">${createdAt}</p>\r\n              </div>\r\n          <p class=\"commentCard__comment\">\r\n            ${content}\r\n          </p>\r\n          <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n          <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n              <i onclick=\"increaseScore(${i}, this)\" class=\"bi bi-plus\"></i>\r\n              <span class=\"count\">${score}</span>\r\n              <i onclick=\"decreaseScore(${i}, this)\" class=\"bi bi-dash\"></i>\r\n          </div>\r\n          <div class=\"crudBtns flex items-center gap-x-3 lg:gap-x-5 font-medium lg:absolute top-7 right-10\">\r\n              <div onclick=\"openModal(this)\" class=\"delete flex items-center gap-x-1 text-red-500 cursor-pointer\">\r\n              <i class=\"bi bi-trash-fill\"></i>\r\n              <p>DELETE</p>\r\n              </div>\r\n              <div class=\"edit flex items-center gap-x-1 cursor-pointer\">\r\n              <i class=\"bi bi-pen-fill\"></i>\r\n              <p>EDIT</p>\r\n              </div>\r\n          </div>\r\n          </div>\r\n      </div>\r\n\r\n        ${renderReplies(replies, i)}\r\n    </section>\r\n        `;\r\n     }\r\n  });\r\n};\r\n\r\nconst renderReplies = (data, commentIndex) => {\r\n\r\n  let html = \"\";\r\n  if (data.length > 0) {\r\n    getSpaceBetweenElements(commentIndex)\r\n\r\n    data.forEach((reply, i) => {\r\n      const { content, createdAt, replyingTo, score, user } = reply;\r\n\r\n      const isDate = (value) => {\r\n        const date = new Date(value);\r\n        return date.getTime() === date.getTime(); // Check if getTime() returns a valid timestamp\r\n      }\r\n\r\n        if (user.username !== currentUser.username) {\r\n            html += /*html*/ `\r\n            <section class=\"replySection\">\r\n            \r\n            <div class=\"replyCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 w-[95%] lg:w-[88%]\">\r\n                    ${\r\n                      i === 0\r\n                        ? /*html*/ `\r\n                    <span id=\"line\" class=\"block line absolute top-0 w-[2px] left-[-.95rem] lg:left-[-3rem] bg-slate-300\"></span>\r\n                    `\r\n                        : \"\"\r\n                    }\r\n                    <div class=\"replyCard__header flex items-center gap-x-4 pb-4\">\r\n                        <img class=\"w-10\" src=\"${user.image.webp}\" alt=\"\">\r\n                        <p class=\"username font-semibold\">${user.username}</p>\r\n                        <p class=\"postedAt font-medium\">${isDate(createdAt) ? formatDate(createdAt) : createdAt}</p>\r\n                    </div>\r\n                    <p class=\"replyCard__comment\">\r\n                     <span class=\"replyTo font-bold pr-1\">@${replyingTo}</span>${content}\r\n                    </p>\r\n                    <div class=\"replyCard__footer flex items-center justify-between mt-5 lg:block\">\r\n                        <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n                            <i onclick=\"increaseReplyScore(${i}, '${commentIndex}', this)\" class=\"bi bi-plus\"></i>\r\n                            <span class=\"count\">${score}</span>\r\n                            <i onclick=\"decreaseReplyScore(${i}, '${commentIndex}', this)\" class=\"bi bi-dash\"></i>\r\n                        </div>\r\n                    <div data-clicked=\"false\" onclick=\"reply(this, ${commentIndex}, true, '${user.username}')\" class=\"replyBtn flex items-center gap-x-1 font-medium lg:absolute top-7 right-10 cursor-pointer\">\r\n                        <i class=\"bi bi-reply-fill\"></i>\r\n                        <p>Reply</p>\r\n                    </div>\r\n                  </div>\r\n           </div>\r\n\r\n            </section>\r\n            `;\r\n        } else {\r\n            html += /*html*/ `\r\n            <div class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 mt-5 ml-auto w-[95%] lg:w-[88%]\">\r\n            ${\r\n                i === 0\r\n                  ? /*html*/ `\r\n              <span id=\"line\" class=\"block line absolute top-0 w-[2px] left-[-.95rem] lg:left-[-3rem] bg-slate-300\"></span>\r\n              `\r\n                  : \"\"\r\n              }\r\n                <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n                    <img class=\"w-10\" src=\"${user.image.webp}\" alt=\"user profile avatar\">\r\n                    <p class=\"username font-semibold\">${user.username}</p>\r\n                    <p class=\"you text-white px-2 ml-[-10px] text-sm\">you</p>\r\n                    <p class=\"postedAt font-medium\">${createdAt}</p>\r\n                </div>\r\n                <p class=\"commentCard__comment\">\r\n                <span class=\"replyTo font-bold pr-1\">@${replyingTo}</span>${content}\r\n                </p>\r\n                <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n                <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n                    <i onclick=\"increaseReplyScore(${i}, '${commentIndex}', this)\" class=\"bi bi-plus\"></i>\r\n                    <span class=\"count\">${score}</span>\r\n                    <i  onclick=\"decreaseReplyScore(${i}, '${commentIndex}', this)\" class=\"bi bi-dash\"></i>\r\n                </div>\r\n                <div class=\"crudBtns flex items-center gap-x-3 lg:gap-x-5 font-medium lg:absolute top-7 right-10\">\r\n                    <div onclick=\"openModal(this)\" class=\"delete flex items-center gap-x-1 text-red-500 cursor-pointer\">\r\n                        <i class=\"bi bi-trash-fill\"></i>\r\n                        <p>DELETE</p>\r\n                    </div>\r\n                    <div onclick=\"edit(this)\" class=\"edit flex items-center gap-x-1 cursor-pointer\">\r\n                        <i class=\"bi bi-pen-fill\"></i>\r\n                        <p>EDIT</p>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n          </div>\r\n            `\r\n     }\r\n    });\r\n  }\r\n\r\n  return html;\r\n};\r\n\r\n\r\nlet heights = []\r\nconst getSpaceBetweenElements = (commentIndex, minusValue = 13) => {\r\n    let element1;\r\n    let element2;\r\n    let spaceBetweenElements;\r\n\r\n    setTimeout(() => {\r\n        const lines = Array.from(document.querySelectorAll('.line'))\r\n        element1 = document.getElementById(`${commentIndex}`);\r\n        if (commentIndex !== commentData.comments.length - 1) {\r\n          element2 = element1.parentElement.nextElementSibling\r\n        } else {\r\n          element2 = document.querySelector(\".addComment\");\r\n        }\r\n        spaceBetweenElements = element2.offsetTop - (element1.offsetTop + element1.offsetHeight)\r\n        heights.push(spaceBetweenElements)\r\n        for (let i = 0; i < heights.length; i++) {\r\n          lines[i].style.height = `${heights[i] - minusValue}px`;\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\nconst increaseScore = (commentIndex, element) => {\r\n    const comment = commentData.comments.find(comment => comment.id === commentIndex + 1)\r\n    comment.score++;\r\n    element.nextElementSibling.textContent = comment.score;\r\n    updatelocalstorage();\r\n}\r\n\r\n\r\nconst decreaseScore = (commentIndex, element) => {\r\n    const comment = commentData.comments.find(comment => comment.id === commentIndex + 1)\r\n    comment.score > 0 && comment.score--;\r\n    element.previousElementSibling.textContent = comment.score;\r\n    updatelocalstorage();\r\n}\r\n\r\nconst increaseReplyScore = (replyIndex, commentIndex, element) => {\r\n    const thisReplies = commentData.comments[commentIndex].replies;\r\n    const reply = thisReplies.find(reply => thisReplies.indexOf(reply) === replyIndex)\r\n    reply.score++;\r\n    element.nextElementSibling.textContent = reply.score;\r\n    updatelocalstorage()\r\n}\r\n\r\nconst decreaseReplyScore = (replyIndex, commentIndex, element) => {\r\n    const thisReplies = commentData.comments[commentIndex].replies;\r\n    const reply = thisReplies.find(reply => thisReplies.indexOf(reply) === replyIndex)\r\n    reply.score > 0 && reply.score--;\r\n    element.previousElementSibling.textContent = reply.score;\r\n    updatelocalstorage()\r\n}\r\n\r\nwindow.addEventListener('resize', () => {\r\n  commentData.comments.forEach((comment, i) => {\r\n    const { replies } = comment\r\n    heights = []\r\n    if (replies.length > 0) {\r\n      getSpaceBetweenElements(i, 45)\r\n    }\r\n  })\r\n})\r\n\r\n\r\nconst reply = (element, commentIndex, isOnReply, replyingTo) => {\r\n    let commentCard;\r\n\r\n    let html = /*html*/ `\r\n    <div class=\"addCommentCard bg-white px-5 lg:pr-4 rounded-xl flex flex-col lg:justify-end lg:flex-row gap-x-5 relative lg:pb-6 lg:pt-4 w-[95%] ml-auto lg:w-[88%] mt-5\">\r\n        <textarea name=\"comment\" id=\"${isOnReply ? 'replyInput' : 'replyToCommentInput'}\" cols=\"30\" rows=\"3\" class=\"textArea w-full px-4 py-1 mt-5 lg:mt-4 rounded-lg lg:w-[70%]\" placeholder=\"Add a comment...\">@${replyingTo + ''} </textarea>\r\n        <div class=\"footer flex justify-between items-center lg:block py-3\">\r\n        <img class=\"w-10 lg:absolute left-5 top-8\" src=\"${currentUser.image.webp}\" alt=\"\">\r\n        <button onclick=\"preRenderReply(this, '${replyingTo}', ${isOnReply})\" type=\"button\" class=\"px-7 py-3 lg:py-2 lg:mt-1 text-white rounded-lg font-medium\">REPLY</button>\r\n        </div>\r\n    </div>\r\n    `\r\n    if (!isOnReply) {\r\n        commentCard =  element.closest(\".commentSection\");\r\n    } else {\r\n        commentCard = element.closest(\".replySection\");\r\n    }\r\n    \r\n   const lastChild = commentCard.lastElementChild;\r\n     \r\n   const replyBtnClicked = element.getAttribute(\"data-clicked\");\r\n\r\n  if (replyBtnClicked == 'false') {\r\n     lastChild.insertAdjacentHTML(\"afterend\", html);\r\n     getSpaceBetweenElements(commentIndex, 45)\r\n     const textArea = document.getElementById(`${isOnReply? 'replyInput' : 'replyToCommentInput'}`)\r\n     textArea.focus();\r\n     textArea.selectionStart = replyingTo.length + 2;\r\n     textArea.selectionEnd = replyingTo.length + 2;\r\n   }\r\n\r\n   element.setAttribute(\"data-clicked\", \"true\");\r\n}\r\n\r\n\r\nconst formatDate = (date, locale = navigator.language) => {\r\n  const calcDaysPassed = (date1, date2) => Math.round(Math.abs(date2 - date1) / (1000 * 60 * 60 * 24))\r\n\r\n  const daysPassed = calcDaysPassed(new Date(), date)\r\n\r\n  switch (daysPassed) {\r\n    case 0:\r\n      return 'Today';\r\n    case 1:\r\n      return 'Yesterday';\r\n    case daysPassed <= 7:\r\n      return '1 week ago';\r\n    case daysPassed <= 14:\r\n      return '2 weeks ago';\r\n    case daysPassed <= 21:\r\n      return '3 weeks ago';\r\n    case daysPassed <= 30:\r\n      return '1 month ago';\r\n    case daysPassed <= 60:\r\n      return '2 months ago';\r\n    case daysPassed <= 90:\r\n      return '3 months ago';\r\n    default:\r\n      return new Intl.DateTimeFormat(locale).format(date)\r\n  }\r\n}\r\n\r\nconst preRenderReply = (element, replyingTo, isOnReply) => {\r\n  let inputValue = element.parentElement.previousElementSibling.value.trim()\r\n  inputValue = inputValue.replace(`@${replyingTo}`, \"\");\r\n\r\n  let commentToInsertIn\r\n  console.log(isOnReply)\r\n  if (!isOnReply) {\r\n   commentToInsertIn = commentData.comments.find(comment => comment.user.username === replyingTo)\r\n  } else {\r\n    commentToInsertIn = commentData.comments.find(comment => comment.replies.find(reply => reply.replyingTo == replyingTo))\r\n  }\r\n\r\n  commentToInsertIn.replies.push({\r\n    content: inputValue,\r\n    createdAt: formatDate(new Date()),\r\n    score: 0,\r\n    replyingTo: replyingTo,\r\n    user: {\r\n      image: {\r\n        png: \"./images/avatars/image-juliusomo.png\",\r\n        webp: \"./images/avatars/image-juliusomo.webp\",\r\n      },\r\n      username: \"juliusomo\",\r\n    },\r\n  });\r\n\r\n  heights = []\r\n  updatelocalstorage()\r\n  renderComments()\r\n  \r\n  commentData.comments.forEach((comment, i) => {\r\n    const { replies } = comment\r\n    if (replies.length > 0) {\r\n      getSpaceBetweenElements(i, 45)\r\n    }\r\n  })\r\n}"]}