{"version":3,"sources":["script.js"],"names":["replyToDelete","modal","document","querySelector","overlay","body","commentsCtn","userImgEl","heights","generateUniqueId","Date","now","toString","Math","random","substring","openModal","element","classList","add","style","display","addEventListener","closeModal","remove","setTimeout","commentData","JSON","parse","localStorage","getItem","currentUser","updatelocalstorage","setItem","stringify","setCurrentUser","src","image","webp","length","fetch","then","res","json","data","renderComments","err","console","log","comments","innerHTML","forEach","comment","i","content","createdAt","replies","score","upvoted","downvoted","user","username","concat","renderReplies","isDate","formatDate","getSpaceBetweenElements","value","date","getTime","commentIndex","html","reply","id","replyingTo","element1","element2","spaceBetweenElements","lines","Array","from","querySelectorAll","getElementById","parentElement","nextElementSibling","offsetTop","offsetHeight","push","height","increaseScore","find","textContent","decreaseScore","previousElementSibling","increaseReplyScore","replyIndex","thisReplies","indexOf","decreaseReplyScore","window","replyToUpdate","inputValue","isOnReply","commentCard","closest","index","children","lastChild","lastElementChild","getAttribute","insertAdjacentHTML","textArea","focus","selectionStart","selectionEnd","setAttribute","locale","arguments","undefined","navigator","language","calcDaysPassed","date1","date2","round","abs","daysPassed","Intl","DateTimeFormat","format","preRenderReply","commentToInsertIn","trim","replace","png","edit","isReply","commentSection","commentCreatedAt","commentScore","validateInput","input","btn","disabled","update","deleteReply","findIndex","splice","commentInput","addComment","el"],"mappings":"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","file":"script.js","sourcesContent":["const modal = document.querySelector(\".modal\");\r\nconst overlay = document.querySelector(\".overlay\");\r\nconst body = document.querySelector(\"body\");\r\nconst commentsCtn = document.querySelector(\".allCommentCtn\");\r\nconst userImgEl = document.querySelector(\"#currentUserImg\");\r\nlet heights = []\r\nlet replyToDelete;\r\n\r\n\r\nconst generateUniqueId = () => {\r\n  return Date.now().toString(36) + Math.random().toString(36).substring(2, 5);\r\n}\r\n\r\nconst openModal = (element) => {\r\n  modal.classList.add(\"fade-in\");\r\n  overlay.classList.add(\"fade-in\");\r\n  modal.style.display = \"block\"; // make the modal visible\r\n  overlay.style.display = \"block\"; // make the overlay visible\r\n  body.classList.add(\"no-scroll\");\r\n\r\n  overlay.addEventListener(\"click\", closeModal);\r\n};\r\n\r\nconst closeModal = () => {\r\n  modal.classList.add(\"fade-out\");\r\n  overlay.classList.add(\"fade-out\");\r\n  body.classList.remove(\"no-scroll\");\r\n\r\n  setTimeout(() => {\r\n    modal.style.display = \"none\"; // hide the modal after the animation completes\r\n    overlay.style.display = \"none\"; // hide the overlay after the animation completes\r\n    modal.classList.remove(\"fade-out\");\r\n    overlay.classList.remove(\"fade-out\");\r\n  }, 300); // set the timeout to match the animation duration\r\n};\r\n\r\nlet commentData = JSON.parse(localStorage.getItem(\"commentData\")) || [];\r\nlet currentUser = {};\r\n\r\nconst updatelocalstorage = () => {\r\n  localStorage.setItem(\"commentData\", JSON.stringify(commentData));\r\n  commentData = JSON.parse(localStorage.getItem(\"commentData\"))\r\n}\r\n\r\nconst setCurrentUser = () => {\r\n  currentUser = commentData.currentUser;\r\n  userImgEl.src = currentUser.image.webp;\r\n};\r\n\r\nif (commentData.length === 0) {\r\n  fetch(\"./data.json\")\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      commentData = data;\r\n      localStorage.setItem(\"commentData\", JSON.stringify(commentData));\r\n      setTimeout(() => {\r\n        setCurrentUser();\r\n        renderComments();\r\n      });\r\n    })\r\n    .catch((err) => console.log(\"something went wrong\", err));\r\n} else {\r\n  setTimeout(() => {\r\n    setCurrentUser();\r\n    console.log(commentData.comments);\r\n    renderComments();\r\n  });\r\n}\r\n\r\n// ! RENDER COMMENTS FUNCTION\r\nconst renderComments = () => {\r\n\r\n  commentsCtn.innerHTML = \"\";\r\n\r\n  commentData.comments.forEach((comment, i) => {\r\n    const { content, createdAt, replies, score, upvoted, downvoted, user } = comment;\r\n\r\n      if (user.username !== currentUser.username) {\r\n        commentsCtn.innerHTML += /*html*/ `\r\n        \r\n        <section class=\"commentSection overflow-hidden\">\r\n           <div id=\"${i}\" class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4\">\r\n               <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n                   <img class=\"w-10\" src=\"${\r\n                     user.image.webp\r\n                   }\" alt=\"profile img avatar\">\r\n                   <p class=\"username font-semibold\">${user.username}</p>\r\n                   <p class=\"postedAt font-medium\">${createdAt}</p>\r\n               </div>\r\n               <p class=\"commentCard__comment\">\r\n                   ${content}\r\n               </p>\r\n               <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n                   <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n                   <i onclick=\"increaseScore(${i}, this, ${upvoted})\" class=\"bi bi-plus\"></i>\r\n                   <span class=\"count\">${score}</span>\r\n                   <i onclick=\"decreaseScore(${i}, this, ${downvoted})\" class=\"bi bi-dash\"></i>\r\n                   </div>\r\n                   <div data-clicked=\"false\" onclick=\"reply(this, ${i}, false, '${user.username}')\" class=\"replyBtn flex items-center gap-x-1 font-medium lg:absolute top-7 right-10 cursor-pointer\">\r\n                   <i class=\"bi bi-reply-fill\"></i>\r\n                   <p>Reply</p>\r\n                   </div>\r\n               </div>\r\n           </div>\r\n   \r\n           ${renderReplies(replies, i)}\r\n   \r\n      </section>\r\n   \r\n        `;\r\n      } else {\r\n          commentsCtn.innerHTML += /*html*/ `\r\n          <section class=\"commentSection\">\r\n          \r\n          <div id=\"${i}\" class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 mt-5 ml-auto\">\r\n              <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n                  <img class=\"w-10\" src=\"${user.image.webp}\" alt=\"user profile avatar\">\r\n                  <p class=\"username font-semibold\">${user.username}</p>\r\n                  <p class=\"you text-white px-2 ml-[-10px] text-sm\">you</p>\r\n                  <p class=\"postedAt font-medium\">${isDate(createdAt) ? formatDate(createdAt) : createdAt}</p>\r\n              </div>\r\n          <p class=\"commentCard__comment\">\r\n            ${content}\r\n          </p>\r\n          <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n          <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n              <i onclick=\"increaseScore(${i}, this, ${upvoted})\" class=\"bi bi-plus\"></i>\r\n              <span class=\"count\">${score}</span>\r\n              <i onclick=\"decreaseScore(${i}, this, ${downvoted})\" class=\"bi bi-dash\"></i>\r\n          </div>\r\n          <div class=\"crudBtns flex items-center gap-x-3 lg:gap-x-5 font-medium lg:absolute top-7 right-10\">\r\n              <div onclick=\"openModal(this)\" class=\"delete flex items-center gap-x-1 text-red-500 cursor-pointer\">\r\n              <i class=\"bi bi-trash-fill\"></i>\r\n              <p>DELETE</p>\r\n              </div>\r\n              <div onclick=\"edit(this, ${i}, ${score}, false)\" class=\"edit flex items-center gap-x-1 cursor-pointer\">\r\n              <i class=\"bi bi-pen-fill\"></i>\r\n              <p>EDIT</p>\r\n              </div>\r\n          </div>\r\n          </div>\r\n      </div>\r\n\r\n        ${renderReplies(replies, i)}\r\n    </section>\r\n        `;\r\n     }\r\n  })\r\n\r\n\r\n  commentData.comments.forEach((comment, i) => {\r\n    const { replies } = comment\r\n    if (replies.length > 0) {\r\n      getSpaceBetweenElements(i)\r\n      heights = []\r\n    }\r\n  })\r\n};\r\n\r\n// ! DATE FORMAT CHECKER\r\nconst isDate = (value) => {\r\n  const date = new Date(value);\r\n  return date.getTime() === date.getTime(); // Check if getTime() returns a valid timestamp\r\n}\r\n\r\n// ! REPLY RENDERING FUNCTION \r\nconst renderReplies = (data, commentIndex) => {\r\n  let html = \"\";\r\n  if (data.length > 0) {\r\n\r\n    data.forEach((reply, i) => {\r\n      const { id, content, createdAt, replyingTo, score, upvoted, downvoted, user } = reply;\r\n\r\n        if (user.username !== currentUser.username) {\r\n            html += /*html*/ `\r\n            <section class=\"replySection\">\r\n            \r\n            <div class=\"replyCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 w-[95%] lg:w-[88%]\">\r\n                    ${\r\n                      i === 0\r\n                        ? /*html*/ `\r\n                    <span id=\"line\" class=\"block line absolute top-0 w-[2px] left-[-.95rem] lg:left-[-3rem] bg-slate-300\"></span>\r\n                    `\r\n                        : \"\"\r\n                    }\r\n                    <div class=\"replyCard__header flex items-center gap-x-4 pb-4\">\r\n                        <img class=\"w-10\" src=\"${user.image.webp}\" alt=\"\">\r\n                        <p class=\"username font-semibold\">${user.username}</p>\r\n                        <p class=\"postedAt font-medium\">${isDate(createdAt) ? formatDate(createdAt) : createdAt}</p>\r\n                    </div>\r\n                    <p class=\"replyCard__comment\">\r\n                     <span class=\"replyTo font-bold pr-1\">@${replyingTo}</span>${content}\r\n                    </p>\r\n                    <div class=\"replyCard__footer flex items-center justify-between mt-5 lg:block\">\r\n                        <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n                            <i onclick=\"increaseReplyScore(${i}, '${commentIndex}', this, ${upvoted})\" class=\"bi bi-plus\"></i>\r\n                            <span class=\"count\">${score}</span>\r\n                            <i onclick=\"decreaseReplyScore(${i}, '${commentIndex}', this, ${downvoted})\" class=\"bi bi-dash\"></i>\r\n                        </div>\r\n                    <div data-clicked=\"false\" onclick=\"reply(this, ${commentIndex}, true, '${user.username}')\" class=\"replyBtn flex items-center gap-x-1 font-medium lg:absolute top-7 right-10 cursor-pointer\">\r\n                        <i class=\"bi bi-reply-fill\"></i>\r\n                        <p>Reply</p>\r\n                    </div>\r\n                  </div>\r\n           </div>\r\n\r\n            </section>\r\n            `;\r\n        } else {\r\n            html += /*html*/ `\r\n            <div class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 mt-5 ml-auto w-[95%] lg:w-[88%]\">\r\n            ${\r\n                i === 0\r\n                  ? /*html*/ `\r\n              <span id=\"line\" class=\"block line absolute top-0 w-[2px] left-[-.95rem] lg:left-[-3rem] bg-slate-300\"></span>\r\n              `\r\n                  : \"\"\r\n              }\r\n                <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n                    <img class=\"w-10\" src=\"${user.image.webp}\" alt=\"user profile avatar\">\r\n                    <p class=\"username font-semibold\">${user.username}</p>\r\n                    <p class=\"you text-white px-2 ml-[-10px] text-sm\">you</p>\r\n                    <p class=\"postedAt font-medium\">${createdAt}</p>\r\n                </div>\r\n                <p class=\"commentCard__comment\">\r\n                <span class=\"replyTo font-bold pr-1\">@${replyingTo}</span>${content}\r\n                </p>\r\n                <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n                <div class=\"score flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n                    <i onclick=\"increaseReplyScore(${i}, '${commentIndex}', this, ${upvoted})\" class=\"bi bi-plus\"></i>\r\n                    <span class=\"count\">${score}</span>\r\n                    <i  onclick=\"decreaseReplyScore(${i}, '${commentIndex}', this, ${downvoted})\" class=\"bi bi-dash\"></i>\r\n                </div>\r\n                <div class=\"crudBtns flex items-center gap-x-3 lg:gap-x-5 font-medium lg:absolute top-7 right-10\">\r\n                    <div onclick=\"deleteReply(this, ${commentIndex}, ${i}, '${id}')\" class=\"delete flex items-center gap-x-1 text-red-500 cursor-pointer\">\r\n                        <i class=\"bi bi-trash-fill\"></i>\r\n                        <p>DELETE</p>\r\n                    </div>\r\n                    <div onclick=\"edit(this, ${commentIndex}, ${i}, ${score}, '${isDate(createdAt) ? formatDate(createdAt) : createdAt}', '${replyingTo}', true)\" class=\"edit flex items-center gap-x-1 cursor-pointer\">\r\n                        <i class=\"bi bi-pen-fill\"></i>\r\n                        <p>EDIT</p>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n          </div>\r\n            `\r\n     }\r\n    });\r\n  }\r\n\r\n  return html;\r\n};\r\n\r\n\r\n\r\nconst getSpaceBetweenElements = (commentIndex) => {\r\n    let element1;\r\n    let element2;\r\n    let spaceBetweenElements;\r\n    let length = commentData.comments.length\r\n\r\n    setTimeout(() => {\r\n        commentData.comments.forEach((comment, i) => {\r\n          const { replies } = comment\r\n          if (replies.length == 0) {\r\n            length--\r\n          }\r\n        })\r\n        const lines = Array.from(document.querySelectorAll('.line'))\r\n        element1 = document.getElementById(`${commentIndex}`);\r\n        if (commentIndex !== commentData.comments.length - 1) {\r\n          element2 = element1.parentElement.nextElementSibling\r\n        } else {\r\n          element2 = document.querySelector(\".addComment\");\r\n        }\r\n        spaceBetweenElements = element2.offsetTop - (element1.offsetTop + element1.offsetHeight)\r\n        heights.push(spaceBetweenElements)\r\n        console.log(heights)\r\n        for (let i = 0; i < length; i++) {\r\n          lines[i].style.height = `${heights[i]}px`;\r\n        }\r\n    });\r\n}\r\n\r\n\r\n\r\nconst increaseScore = (commentIndex, element, upvoted) => {\r\n    const comment = commentData.comments.find(comment => comment.id === commentIndex + 1)\r\n    comment.upvoted = true;\r\n    !upvoted && comment.score++\r\n    comment.downvoted = false;\r\n    element.nextElementSibling.textContent = comment.score;\r\n    updatelocalstorage()\r\n    heights = []\r\n    !upvoted && renderComments()\r\n}\r\n\r\n\r\nconst decreaseScore = (commentIndex, element, downvoted) => {\r\n    const comment = commentData.comments.find(comment => comment.id === commentIndex + 1)\r\n    comment.downvoted = true;\r\n    if (!downvoted && comment.score > 0) {\r\n      comment.score--\r\n    }\r\n    comment.upvoted = false; \r\n    element.previousElementSibling.textContent = comment.score;\r\n    updatelocalstorage();\r\n    heights = []\r\n    !downvoted && renderComments()\r\n}\r\n\r\nconst increaseReplyScore = (replyIndex, commentIndex, element, upvoted) => {\r\n    const thisReplies = commentData.comments[commentIndex].replies;\r\n    const reply = thisReplies.find(reply => thisReplies.indexOf(reply) === replyIndex)\r\n    reply.upvoted = true\r\n    !upvoted && reply.score++;\r\n    reply.downvoted = false\r\n    element.nextElementSibling.textContent = reply.score;\r\n    updatelocalstorage()\r\n    heights = []\r\n    !upvoted && renderComments()\r\n}\r\n\r\nconst decreaseReplyScore = (replyIndex, commentIndex, element, downvoted) => {\r\n    const thisReplies = commentData.comments[commentIndex].replies;\r\n    const reply = thisReplies.find(reply => thisReplies.indexOf(reply) === replyIndex)\r\n    reply.downvoted = true\r\n    if (!downvoted && reply.score > 0) {\r\n      reply.score--\r\n    }\r\n    reply.upvoted = false;\r\n    element.previousElementSibling.textContent = reply.score;\r\n    updatelocalstorage()\r\n    heights = []\r\n    !downvoted && renderComments()\r\n}\r\n\r\nwindow.addEventListener('resize', () => {\r\n  commentData.comments.forEach((comment, i) => {\r\n    heights = []\r\n    const { replies } = comment\r\n    if (replies.length > 0) {\r\n      getSpaceBetweenElements(i)\r\n    }\r\n  })\r\n})\r\n\r\n\r\nconst reply = (element, commentIndex, isOnReply, replyingTo) => {\r\n  let commentCard;\r\n  heights = []\r\n\r\n    if (!isOnReply) {\r\n        commentCard =  element.closest(\".commentSection\");\r\n    } else {\r\n        commentCard = element.closest(\".replySection\");\r\n    }\r\n    \r\n    const commentCardChildren = Array.from(commentCard.children);\r\n    const index  = commentCardChildren.length - 1;\r\n    \r\n\r\n    let html = /*html*/ `\r\n    <div class=\"addCommentCard bg-white px-5 lg:pr-4 rounded-xl flex flex-col lg:justify-end lg:flex-row gap-x-5 relative lg:pb-6 lg:pt-4 w-[95%] ml-auto lg:w-[88%] mt-5\">\r\n        ${\r\n          index === 0\r\n            ? /*html*/ `\r\n        <span id=\"line\" class=\"block line absolute top-0 w-[2px] left-[-.95rem] lg:left-[-3rem] bg-slate-300\"></span>\r\n        `\r\n            : \"\"\r\n        }\r\n        <textarea name=\"comment\" id=\"${isOnReply ? 'replyInput' : 'replyToCommentInput'}\" cols=\"30\" rows=\"3\" class=\"textArea w-full px-4 py-1 mt-5 lg:mt-4 rounded-lg lg:w-[70%]\" placeholder=\"Add a comment...\">@${replyingTo + ''} </textarea>\r\n        <div class=\"footer flex justify-between items-center lg:block py-3\">\r\n        <img class=\"w-10 lg:absolute left-5 top-8\" src=\"${currentUser.image.webp}\" alt=\"\">\r\n        <button onclick=\"preRenderReply(this, '${replyingTo}', ${isOnReply})\" type=\"button\" class=\"px-7 py-3 lg:py-2 lg:mt-1 text-white rounded-lg font-medium\">REPLY</button>\r\n        </div>\r\n    </div>\r\n    `\r\n    \r\n   const lastChild = commentCard.lastElementChild;\r\n     \r\n   const replyBtnClicked = element.getAttribute(\"data-clicked\");\r\n\r\n  if (replyBtnClicked == 'false') {\r\n     lastChild.insertAdjacentHTML(\"afterend\", html);\r\n     commentData.comments.forEach((comment, i) => {\r\n      const { replies } = comment\r\n      if (replies.length > 0) {\r\n        getSpaceBetweenElements(i)\r\n      }\r\n    })\r\n     const textArea = document.getElementById(`${isOnReply? 'replyInput' : 'replyToCommentInput'}`)\r\n     textArea.focus();\r\n     textArea.selectionStart = replyingTo.length + 2;\r\n     textArea.selectionEnd = replyingTo.length + 2;\r\n   }\r\n\r\n   element.setAttribute(\"data-clicked\", \"true\");\r\n}\r\n\r\n\r\nconst formatDate = (date, locale = navigator.language) => {\r\n  const calcDaysPassed = (date1, date2) => Math.round(Math.abs(date2 - date1) / (1000 * 60 * 60 * 24))\r\n\r\n  const daysPassed = calcDaysPassed(new Date(), date)\r\n  switch (daysPassed) {\r\n    case 0:\r\n      return 'Today';\r\n    case 1:\r\n      return 'Yesterday';\r\n    case daysPassed <= 7:\r\n      return '1 week ago';\r\n    case daysPassed <= 14:\r\n      return '2 weeks ago';\r\n    case daysPassed <= 21:\r\n      return '3 weeks ago';\r\n    case daysPassed <= 30:\r\n      return '1 month ago';\r\n    case daysPassed <= 60:\r\n      return '2 months ago';\r\n    case daysPassed <= 90:\r\n      return '3 months ago';\r\n    default:\r\n      return new Intl.DateTimeFormat(locale).format(date)\r\n  }\r\n}\r\n\r\nconst preRenderReply = (element, replyingTo, isOnReply) => {\r\n  heights = []\r\n  let inputValue = element.parentElement.previousElementSibling.value.trim()\r\n  inputValue = inputValue.replace(`@${replyingTo}`, \"\");\r\n\r\n  let commentToInsertIn\r\n  console.log(isOnReply)\r\n  if (!isOnReply) {\r\n   commentToInsertIn = commentData.comments.find(comment => comment.user.username === replyingTo)\r\n  } else {\r\n    commentToInsertIn = commentData.comments.find(comment => comment.replies.find(reply => reply.replyingTo == replyingTo))\r\n  }\r\n\r\n  commentToInsertIn.replies.push({\r\n    id: generateUniqueId(),\r\n    content: inputValue.trim(),\r\n    createdAt: formatDate(new Date()),\r\n    score: 0,\r\n    replyingTo: replyingTo,\r\n    user: {\r\n      image: {\r\n        png: \"./images/avatars/image-juliusomo.png\",\r\n        webp: \"./images/avatars/image-juliusomo.webp\",\r\n      },\r\n      username: \"juliusomo\",\r\n    },\r\n  });\r\n\r\n  updatelocalstorage()\r\n  renderComments()\r\n}\r\n\r\nlet replyToUpdate;\r\nlet inputValue;\r\n\r\nconst edit = (element, commentIndex, replyIndex, score, createdAt, replyingTo, isReply) => {\r\n  const comment = commentData.comments.find(comment => comment.id === commentIndex + 1)\r\n  const thisReplies = comment.replies\r\n  const reply = thisReplies.find(reply => thisReplies.indexOf(reply) === replyIndex)\r\n  replyToUpdate = reply\r\n  inputValue = element.parentElement.parentElement.previousElementSibling.textContent.trim().replace(`@${replyingTo}`, \"\")\r\n  const commentCard = element.closest(\".commentCard\")\r\n  const commentSection = element.closest(\".commentSection\")\r\n  let html;\r\n\r\n  if (isReply) {\r\n    \r\n    html = /*html*/ `\r\n    <div class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 mt-5 ml-auto w-[95%] lg:w-[88%]\">\r\n      ${\r\n        replyIndex === 0\r\n          ? /*html*/ `\r\n      <span id=\"line\" class=\"block line absolute top-0 w-[2px] left-[-.95rem] lg:left-[-3rem] bg-slate-300\"></span>\r\n      `\r\n          : \"\"\r\n      }\r\n      <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n      <img class=\"w-10\" src=\"${currentUser.image.webp}\" alt=\"user profile avatar\">\r\n        <p class=\"username font-semibold\">juliosumo</p>\r\n        <p class=\"you text-white px-2 ml-[-10px] text-sm bg-blue\">you</p>\r\n        <p class=\"postedAt font-medium\">${createdAt}</p>\r\n        </div>\r\n      <textarea oninput=\"validateInput(this)\" name=\"comment\" id=\"update\" cols=\"30\" rows=\"4\" class=\"w-full px-4 py-2 rounded-lg mb-3 lg:mb-0\">@${replyingTo} ${inputValue}</textarea>\r\n      <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n        <div class=\"score bg-grey flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n          <i class=\"bi bi-plus\"></i>\r\n          <span class=\"count\">${score}</span>\r\n          <i class=\"bi bi-dash\"></i> \r\n        </div>\r\n          <div class=\"updateBtn lg:text-right\">\r\n            <button disabled onclick=\"update(this, '${replyingTo}')\" id=\"updateBtn\" class=\"px-7 py-3 lg:py-2 lg:mt-1 text-white rounded-lg font-medium disabled:opacity-30 disabled:pointer-events-none\">UPDATE</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n   </div>\r\n    `\r\n\r\n  } else {\r\n    let commentCreatedAt = comment.createdAt\r\n    let commentScore = comment.score\r\n    let id = comment.id\r\n    \r\n    html = /*html*/ `\r\n    <div class=\"commentCard bg-white rounded-xl p-5 relative lg:pr-20 lg:pl-24 lg:pb-4 mt-5 ml-auto\">\r\n\r\n      <div class=\"commentCard__header flex items-center gap-x-4 pb-4\">\r\n      <img class=\"w-10\" src=\"${currentUser.image.webp}\" alt=\"user profile avatar\">\r\n        <p class=\"username font-semibold\">juliosumo</p>\r\n        <p class=\"you text-white px-2 ml-[-10px] text-sm bg-blue\">you</p>\r\n        <p class=\"postedAt font-medium\">${commentCreatedAt}</p>\r\n        </div>\r\n      <textarea oninput=\"validateInput(this)\" name=\"comment\" id=\"update\" cols=\"30\" rows=\"4\" class=\"w-full px-4 py-2 rounded-lg mb-3 lg:mb-0\"> ${inputValue}</textarea>\r\n      <div class=\"commentCard__footer flex items-center justify-between mt-5 lg:block\">\r\n        <div class=\"score bg-grey flex items-center gap-x-3 font-medium rounded-lg px-4 py-2 lg:absolute left-7 lg:flex-col top-5 lg:py-4 lg:px-3\">\r\n          <i class=\"bi bi-plus\"></i>\r\n          <span class=\"count\">${commentScore}</span>\r\n          <i class=\"bi bi-dash\"></i> \r\n        </div>\r\n          <div class=\"updateBtn lg:text-right\">\r\n            <button data-commentId=\"${id}\" disabled onclick=\"update(this, false)\" id=\"updateBtn\" class=\"px-7 py-3 lg:py-2 lg:mt-1 text-white rounded-lg font-medium disabled:opacity-30 disabled:pointer-events-none\">UPDATE</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n   </div>\r\n    `\r\n  }\r\n  \r\n  heights = []\r\n  commentCard.remove()\r\n  commentSection.insertAdjacentHTML(\"beforeend\", html)\r\n  commentData.comments.forEach((comment, i) => {\r\n    const { replies } = comment\r\n    if (replies.length > 0) {\r\n      getSpaceBetweenElements(i)\r\n    }\r\n  })\r\n\r\n  const textArea = document.getElementById(\"update\")\r\n  textArea.focus();\r\n  textArea.selectionStart = textArea.value.length + 1;\r\n  textArea.selectionEnd = textArea.value.length + 1;\r\n}\r\n\r\nconst validateInput = (input) => {\r\n  const btn = document.getElementById(\"updateBtn\")\r\n  if (input.value === inputValue) {\r\n    btn.disabled = true;\r\n  } else {\r\n    btn.disabled = false;\r\n  }\r\n} \r\n\r\nconst update = (element, replyingTo) => {\r\n  let inputValue;\r\n  heights = []\r\n  if (replyingTo !== false) {\r\n    inputValue  = element.parentElement.parentElement.previousElementSibling.value.trim().replace(`@${replyingTo}`, \"\")\r\n    replyToUpdate.content = inputValue\r\n    replyToUpdate.createdAt = formatDate(new Date())\r\n  } else {\r\n    inputValue = element.parentElement.parentElement.previousElementSibling.value.trim()\r\n    const id = +element.getAttribute(\"data-commentId\")\r\n    const comment = commentData.comments.find(comment => comment.id === id)\r\n    \r\n    comment.content = inputValue\r\n    comment.createdAt = formatDate(new Date())\r\n  }\r\n  updatelocalstorage()\r\n  renderComments()\r\n}\r\n\r\nconst deleteReply = (element, commentIndex, replyIndex, id) => {\r\n  const comment = commentData.comments.find(comment => comment.id === commentIndex + 1)\r\n  let thisReplies = comment.replies\r\n  const index = thisReplies.findIndex(reply => reply.id === id);\r\n  console.log(index)\r\n  if (index === -1) {\r\n    // reply not found\r\n    return;\r\n  }\r\n\r\n  openModal()\r\n\r\n  const deleteBtn = document.getElementById(\"deleteBtn\")\r\n\r\n  deleteBtn.addEventListener(\"click\", () => { \r\n    element.parentElement.parentElement.parentElement.remove()\r\n    thisReplies.splice(index, 1)\r\n    console.log(commentData.comments)\r\n    setTimeout(() => {\r\n      updatelocalstorage()\r\n      renderComments()\r\n    });\r\n    closeModal()\r\n  })\r\n}\r\n\r\n// ! ADDING COMMENT\r\nconst commentInput = document.querySelector('.addCommentInput')\r\n\r\nconst addComment = (el) => {\r\n  const inputValue = commentInput.value.trim();\r\n  let length = commentData.comments.length + 1\r\n  \r\n  if (inputValue === \"\") {\r\n    return;\r\n  }\r\n  \r\n  commentData.comments.push({\r\n    id: length,\r\n    content: inputValue,\r\n    createdAt: formatDate(new Date()),\r\n    score: 0,\r\n    upvoted: false,\r\n    downvoted: false,\r\n    user: {\r\n      image: {\r\n        png: \"./images/avatars/image-juliusomo.png\",\r\n        webp: \"./images/avatars/image-juliusomo.webp\",\r\n      },\r\n      username: \"juliusomo\",\r\n    },\r\n    replies: [],\r\n  })\r\n\r\n  setTimeout(() => {\r\n    updatelocalstorage()\r\n    renderComments()\r\n  });\r\n  console.log(commentData.comments)\r\n}\r\n"]}